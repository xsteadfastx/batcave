---
- name: install deps
  apt:
    name=zsh
    state=present
  become: yes
  when: ansible_os_family == 'Debian'

- name: install deps
  apk:
    name=zsh
    state=present
  become: yes
  when: ansible_os_family == 'Alpine'

- name: clone oh-my-zsh
  git:
    repo=https://github.com/robbyrussell/oh-my-zsh.git
    dest=~/.oh-my-zsh

- name: copy files
  copy:
    src={{ item.src }}
    dest={{ item.dest }}
  with_items:
    - {'src': 'zshrc', 'dest': '~/.zshrc'}
    - {'src': 'bash_aliases', 'dest': '~/.bash_aliases'}

- name: set shell
  user:
    name={{ ansible_env.USER }}
    shell=/usr/bin/zsh
  become: yes
