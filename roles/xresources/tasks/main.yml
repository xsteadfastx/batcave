---
- name: install deps
  package:
    name=fonts-symbola
    state=latest
  become: yes
  when: ansible_os_family == 'Debian'
  tags:
    - skip_ansible_lint

- name: needed dirs
  file:
    path={{ item }}
    state=directory
  with_items:
    - ~/.fonts

- name: remove files
  file:
    path={{ item }}
    state=absent
  with_items:
    - ~/.Xresources
    - ~/.xprofile
    - ~/.fonts/RobotoMono-Regular.ttf
    - ~/.fonts/Monoisome-Regular.ttf
    - ~/.fonts/FiraCode-Regular.ttf
    - ~/.fonts/FiraMono-Regular.ttf
    - ~/.fonts/Hack-Regular.ttf

- name: link files
  file:
    src={{ batcave_path }}/roles/xresources/files/{{ item.src }}
    dest={{ item.dest }}
    state=link
  with_items:
    - {'src': 'FiraMono-Regular.ttf', 'dest': '~/.fonts/FiraMono-Regular.ttf'}
    - {'src': 'Fura Mono Regular Nerd Font Complete Mono.otf', 'dest': '~/.fonts/Fura Mono Regular Nerd Font Complete Mono.otf'}
    - {'src': 'IBM Plex Mono Nerd Font Complete Mono.otf', 'dest': '~/.fonts/IBM Plex Mono Nerd Font Complete Mono.otf'}

- name: rebuild font cache
  command: fc-cache -r ~/.fonts
  tags:
    - skip_ansible_lint
